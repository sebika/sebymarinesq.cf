<html>

<head>

	<title>Poker</title>
	<link rel="icon" href="Images/icon.png" type="image/png">

</head>

<body>
<style>body{margin:0;  overflow:hidden;}</style>
<p align = 'center'>
<canvas id ="gameCanvas"></canvas>
</p>

<script>

var canvas;
var canvasContext;
canvas = document.getElementById('gameCanvas');
canvasContext = canvas.getContext('2d');

var colors     = ["aqua",  "black", "blue",  "fuchsia",
                     "green", "cyan",  "lime",  "maroon",
                     "navy",  "olive", "purple","red",
                     "silver","teal",  "yellow","azure",
                     "gold",  "bisque","pink",  "orange"];
var m_x, m_y;
const fps = 1000;
var card_height = 180;
var card_width = card_height / 1.53;
const chip_size = card_height / 3;

const gap = 30;
const speedFlop = 1.8, speedTurn = 3, speedRiver = 4;
const SB = 100, BB = 200;


var playerCard1 = random_number(52), playerCard2 = random_number(52);
var computerCard1 = random_number(52), computerCard2 = random_number(52);

var MyHAND = [], ComputerHAND =[];

var FlopAnimation = 0, TurnAnimation = 0, RiverAnimation = 0;
var cardX = [], cardAlpha = [];

var poz = [], u = [], card = [], OK = [], hand1 = [], hand2 = [];
var val1 = [], val2 = [];
var IDK = 0, AIdecision = AI(),adev = 0,click = 0,wait = 1,OK = 0,snd;

var callx, cally, raisex, raisey, foldx, foldy;

var myBank = 99999, computerBank = 99999, smallBlind = SB, bigBlind = BB;
var handsPlayed = 0, MyBet = 0, ComputerBet = 0;
var handStage = -1; // 0 = before flop, 1 = flop, 2 = turn, 3 = river, 4 = done
var call_checked = 0, raise_checked = 0, fold_checked = 0;
var myTurn = 0, computerTurn = 0, myFold = 0, computerFold = 0;

var SHUFFLE = new Audio("Sounds/shuffleDeck.mp3");
var CALL = new Audio("Sounds/call.mp3");
var CHECK = new Audio("Sounds/check.mp3");
var RAISE = new Audio("Sounds/raise.mp3");
var FOLD = new Audio("Sounds/fold.mp3");
var PLAYERCALL = new Audio("Sounds/playerCalls.mp3");
var PLAYERCHECK = new Audio("Sounds/playerChecks.mp3");
var PLAYERRAISE = new Audio("Sounds/playerRaises.mp3");
var PLAYERFOLD = new Audio("Sounds/playerFolds.mp3");
var WIN = new Audio("Sounds/playerWins.mp3");
var LOSE = new Audio("Sounds/playerLoses.mp3");


window.onload = function() 
{
	init();
	window.addEventListener("resize", init, false);
	
	canvas.addEventListener('mousedown',handleMouseClick);
	
	setInterval(game, 1000/fps);
}

function init()
{
	var myWidth = window.innerWidth;
	var myHeight = window.innerHeight;
	canvas.width = myWidth;
	canvas.height = myHeight;
	poz[1] = canvas.width/2 - 2*card_width - 1.5*gap;
	poz[2] = canvas.width/2 - card_width - 0.5*gap;
	poz[3] = canvas.width/2 + 0.5*gap;
	poz[4] = canvas.width/2 + card_width + 1.5*gap;
	poz[5] = canvas.width/2 + 2*card_width + 2.5*gap;
	for(var i = 1; i <= 52; i++)
		OK[i] = 1;
	OK[playerCard1] = 0; OK[playerCard2] = 0;
	OK[computerCard1] = 0; OK[computerCard2] = 0;
	for(var i = 1; i <= 5; i++)
		u[i] = 0;
	playerCard1 = random_number(52);
	OK[playerCard1] = 0;
	playerCard2 = random_number(52);
	while(OK[playerCard2] == 0)
		playerCard2 = random_number(52);
	OK[playerCard2] = 0;
	computerCard1 = random_number(52);
	while(OK[computerCard1] == 0)
		computerCard1 = random_number(52);
	OK[computerCard1] = 0;
	computerCard2 = random_number(52);
	while(OK[computerCard2] == 0)
		computerCard2 = random_number(52);
	OK[computerCard2] = 0;
	for(var i = 1; i <= 5; i++)
	{
		var nr = random_number(52);
		while(OK[nr] == 0)
			nr = random_number(52);
		card[i] = nr;
		OK[nr] = 0;
	}
	FlopAnimation = 0;
	TurnAnimation = 0;
	RiverAnimation = 0;
	for(var i = 1; i <= 5; i++)
	{
		cardAlpha[i] = 0;
		cardX[i] = poz[1];
	}
	callx = poz[5] + card_width;
	cally = canvas.height - card_height - 30;
	raisex = poz[5] + card_width;
	raisey = canvas.height - card_height - 30 + chip_size;
	foldx = poz[5] + card_width;
	foldy = canvas.height - card_height - 30 + 2*chip_size;
	SHUFFLE.play();
}

function endHand()
{
	for(var i = 1; i <= 52; i++)
		OK[i] = 1;
	OK[playerCard1] = 0; OK[playerCard2] = 0;
	OK[computerCard1] = 0; OK[computerCard2] = 0;
	for(var i = 1; i <= 5; i++)
		u[i] = 0;
	playerCard1 = random_number(52);
	OK[playerCard1] = 0;
	playerCard2 = random_number(52);
	while(OK[playerCard2] == 0)
		playerCard2 = random_number(52);
	OK[playerCard2] = 0;
	computerCard1 = random_number(52);
	while(OK[computerCard1] == 0)
		computerCard1 = random_number(52);
	OK[computerCard1] = 0;
	computerCard2 = random_number(52);
	while(OK[computerCard2] == 0)
		computerCard2 = random_number(52);
	OK[computerCard2] = 0;
	for(var i = 1; i <= 5; i++)
	{
		var nr = random_number(52);
		while(OK[nr] == 0)
			nr = random_number(52);
		card[i] = nr;
		OK[nr] = 0;
	}
	FlopAnimation = 0;
	TurnAnimation = 0;
	RiverAnimation = 0;
	for(var i = 1; i <= 5; i++)
	{
		cardAlpha[i] = 0;
		cardX[i] = poz[1];
	}
	click = 0;
	adev = 0;
	handStage = -1;
	handsPlayed ++;
	if(handsPlayed % 5 == 0) 
	{
		smallBlind = bigBlind;
		bigBlind *= 2;
	}
	IDK = 0;
	myFold = 0;
	computerFold = 0;
	SHUFFLE.play();
}

function game()
{
	drawEverything();
	moveEverything();
}

function moveEverything() 
{
	if(FlopAnimation == 1)
	{
		for(var i = 1; i <= 3; i++)
		{
			cardAlpha[i] += speedFlop / 200;
			cardX[i] += speedFlop;
			if(cardX[i] > poz[i]) cardX[i] = poz[i];
		}
		if(cardX[1] == poz[1] && cardX[2] == poz[2] && cardX[3] == poz[3]) FlopAnimation = 0;
	}
	if(TurnAnimation == 1)
	{
		cardAlpha[4] += speedTurn / 400;
		cardX[4] += speedTurn;
		if(cardX[4] > poz[4]) cardX[4] = poz[4];
		if(cardX[4] == poz[4]) TurnAnimation = 0;
	}
	if(RiverAnimation == 1)
	{
		cardAlpha[5] += speedRiver / 500;
		cardX[5] += speedRiver;
		if(cardX[5] > poz[5]) cardX[5] = poz[5];
		if(cardX[5] == poz[5]) RiverAnimation = 0;
	}
}

function drawEverything() 
{
	var background = new Image();
	background.src = "Images/table.jpg";

	canvasContext.drawImage(background,0,0,canvas.width,canvas.height);
	
	displayCard(canvas.width/2 - gap/2 - card_width,canvas.height - card_height - 30,playerCard1,1);
	displayCard(canvas.width/2 + gap/2,canvas.height - card_height - 30,playerCard2,1);
	
	displayCard(canvas.width/2 - gap/2 - card_width,30,101,1);
	displayCard(canvas.width/2 + gap/2,30,101,1);
	
	displayCard(canvas.width/2 - 3*card_width - 2.5*gap,canvas.height/2 - card_height/2,101,1);
	
	for(var i = 1; i <= 5; i++)
		displayCard(poz[i],canvas.height/2 - card_height/2,200,1);
	
	for(var i = 5; i >= 1; i--)
		if(u[i] == 1) displayCard(cardX[i],canvas.height/2 - card_height/2,card[i],cardAlpha[i]);
		
	// /////////////////////////////////////////
	
	if(handStage == -1)
	{
		handStage ++;
		if(handsPlayed % 2 == 0) 
		{
			MyBet = smallBlind;
			ComputerBet = bigBlind;
			myTurn = 0;
			computerTurn = 1;
		}
		else
		{
			ComputerBet = smallBlind;
			MyBet = bigBlind;
			myTurn = 1;
			computerTurn = 0;
		}
		myBank -= MyBet;
		computerBank -= ComputerBet;
	}	
	
	wait = 0;
	snd ++;
	
	if(handsPlayed % 2 == 0)
	{
		var END = 0;
		if(call_checked == 1 && myTurn == 1)
		{
			myBank -= ComputerBet - MyBet;
			MyBet = ComputerBet;
			call_checked = 0;
			myTurn = 0;
			computerTurn = 1;
			wait ++;
			PLAYERCALL.play();
			snd = 0;
		}
		if(raise_checked == 1 && myTurn == 1)
		{		
			myBank -= 500;
			MyBet += 500;
			raise_checked = 0;
			myTurn = 0;
			computerTurn = 1;
			wait ++;
			PLAYERRAISE.play();
			snd = 0;
		}
		if(fold_checked == 1 && myTurn == 1)
		{
			//if(IDK < 4) {computerBank += ComputerBet + MyBet;	handStage = -1;}
			myFold = 1;
			fold_checked = 0;
			//endHand(); 
			IDK = 4;
			END = 1;
			wait ++;
			PLAYERFOLD.play();
			snd = 0;
		}
		if(END == 0)
		{
			if(computerTurn == 1 && click == 0)
			{
				computerTurn = 0;
				myTurn = 1;
				wait ++;
			}
			if(computerTurn == 1 && click > 0)
			{
				AIdecision = AI();
				if(AIdecision == -1)
				{
					computerBank -= MyBet - ComputerBet;
					ComputerBet = MyBet;
					myTurn = 1;
					computerTurn = 0;
					wait ++;
				}
				if(AIdecision > 0)
				{		
					computerBank -= 600;
					ComputerBet += 600;
					myTurn = 1;
					computerTurn = 0;
					wait ++;
				}
				if(AIdecision == -3)
				{
					//if(IDK < 4) {myBank += ComputerBet + MyBet;	handStage = -1;}
					//endHand();
					computerFold = 1;
					IDK = 4;
					END = 1;
					wait ++;
				}
			}
			if(snd > 350 && snd < 360  && myFold == 0)
			{
				console.log(AIdecision);
				if(AIdecision == -1)	CALL.play();
				else if(AIdecision == -3)	FOLD.play();
				else RAISE.play();
			}
			if(MyBet == ComputerBet && AIdecision == -1 && wait >= 2)
				DRAW();
		}
	}
	else
	{
		var END = 0;
		if(adev == 0)
		{
			adev = 1;
			AIdecision = AI();
			console.log(AIdecision);
			if(AIdecision == -1)
			{
				computerBank -= MyBet - ComputerBet;
				ComputerBet = MyBet;
				myTurn = 1;
				computerTurn = 0;
				snd = 0;
				wait ++;
			}
			if(AIdecision > 0)
			{		
				computerBank -= 600;
				ComputerBet += 600;
				myTurn = 1;
				computerTurn = 0;
				snd = 0;
				wait ++;
			}
			if(AIdecision == -3)
			{
				//if(IDK < 4) {myBank += ComputerBet + MyBet;	handStage = -1;}
				//endHand();
				computerFold = 1;
				snd = 0;
				IDK = 4;
				wait ++;
			}
		}
	
		if(call_checked == 1 && myTurn == 1)
		{
			myBank -= ComputerBet - MyBet;
			MyBet = ComputerBet;
			call_checked = 0;
			myTurn = 0;
			computerTurn = 1;
			wait ++;
			snd = 0;
			PLAYERCALL.play();
		}
		if(raise_checked == 1 && myTurn == 1)
		{		
			myBank -= 500;
			MyBet += 500;
			raise_checked = 0;
			myTurn = 0;
			computerTurn = 1;
			wait ++;
			snd = 0;
			PLAYERRAISE.play();
		}
		if(fold_checked == 1 && myTurn == 1)
		{
			//if(IDK < 4) {computerBank += ComputerBet + MyBet; handStage = -1;}
			myFold = 1;
			fold_checked = 0;
			//endHand();
			IDK = 4;
			END = 1;
			wait ++;
			snd = 0;
			PLAYERFOLD.play();
		}
		if(END == 0)
		{
			if(computerTurn == 1 && click == 0)
			{
				computerTurn = 0;
				myTurn = 1;
				wait ++;
			}
			if(computerTurn == 1 && click > 0)
			{
				AIdecision = AI();
				if(AIdecision == -1) // check
				{
					computerBank -= MyBet - ComputerBet;
					ComputerBet = MyBet;
					myTurn = 1;
					computerTurn = 0;
					snd = 0;
					wait ++;
				}
				if(AIdecision > 0)
				{		
					computerBank -= 600;
					ComputerBet += 600;
					myTurn = 1;
					computerTurn = 0;
					snd = 0;
					wait ++;
				}
				if(AIdecision == -3)
				{
					//myBank += ComputerBet + MyBet;
					handStage = -1;
					computerFold = 1;
					snd = 0;
					IDK = 4;
					endHand();
					wait ++;
				}
			}
			if(snd > 500 && snd < 510  && myFold == 0)
			{
				if(AIdecision == -1)	CALL.play();
				else if(AIdecision == -3)	FOLD.play();
				else RAISE.play();
			}
			if(MyBet == ComputerBet && AIdecision == -1 && wait >= 2)
				DRAW();
		}
	}

	if(IDK == 4)
	{
		displayCard(canvas.width/2 - gap/2 - card_width,30,computerCard1,1);
		displayCard(canvas.width/2 + gap/2,30,computerCard2,1);
		displayBestHands();
		showMessage2((poz[3] + card_width + canvas.width)/2, gap + card_height / 2, "PRESS SPACE TO CONTINUE");
		if(OK == 1)
		{
			OK = 0;
			handStage = -1;
			if(myFold == 0 && computerFold == 0)
			{
				if(cmpHand(MyHAND, ComputerHAND) > 0) 
				{
					myBank += MyBet + ComputerBet;
					WIN.play();
				}
				else if(cmpHand(MyHAND, ComputerHAND) < 0)
				{
					computerBank += MyBet + ComputerBet;
					LOSE.play();
				}
				else
				{
					myBank += (MyBet + ComputerBet)/2;
					computerBank += (MyBet + ComputerBet)/2;
				}
			}
			else if(myFold == 1)
			{
				computerBank += MyBet + ComputerBet;
				LOSE.play();
			}
			else 
			{
				myBank += MyBet + ComputerBet;
				WIN.play();
			}
			DRAW();
			endHand();
		}
	}
	
	drawChips();
	showBank();
	drawButtons();
	showMyBet(MyBet);	
	showComputerBet(ComputerBet);
}

function AI()
{
	var nr = random_number(100)
	if(nr < 80) return -1; // call
	else if(nr < 90) return random_number(computerBank); //raise
	else return -3; // fold
}

function drawChips()
{
	var aux = myBank;
	nr = Math.floor(aux / 10000);
	aux -= nr * 10000;
	displayChip(1.4 * gap + 2*chip_size + 200, canvas.height - card_height - 30 + 2*chip_size,10000);
	showMessage(1.6 * gap + 3*chip_size + 200, canvas.height - card_height - 30 + 2.5 * chip_size,"x" + nr);
	
	nr = Math.floor(aux / 5000);
	aux -= nr * 5000;
	displayChip(1.4 * gap + 2*chip_size + 200, canvas.height - card_height - 30 + chip_size,5000);
	showMessage(1.6 * gap + 3*chip_size + 200, canvas.height - card_height - 30 + 1.5 * chip_size,"x" + nr);
	
	nr = Math.floor(aux / 1000);
	aux -= nr * 1000;
	displayChip(1.4 * gap + 2*chip_size + 200, canvas.height - card_height - 30,1000);
	showMessage(1.6 * gap + 3*chip_size + 200, canvas.height - card_height - 30 + 0.5 * chip_size,"x" + nr);
	
	
	
	nr = Math.floor(aux / 500);
	aux -= nr * 500;
	displayChip(1.2 * gap + chip_size + 100, canvas.height - card_height - 30 + 2*chip_size,500);
	showMessage(1.4 * gap + 2*chip_size + 100, canvas.height - card_height - 30 + 2.5 * chip_size,"x" + nr);
	
	nr = Math.floor(aux / 100);
	aux -= nr * 100;
	displayChip(1.2 * gap + chip_size + 100, canvas.height - card_height - 30 + chip_size,100);
	showMessage(1.4 * gap + 2*chip_size + 100, canvas.height - card_height - 30 + 1.5 * chip_size,"x" + nr);
	
	nr = Math.floor(aux / 50);
	aux -= nr * 50;
	displayChip(1.2 * gap + chip_size + 100, canvas.height - card_height - 30,50);
	showMessage(1.4 * gap + 2*chip_size + 100, canvas.height - card_height - 30 + 0.5 * chip_size,"x" + nr);


	
	nr = Math.floor(aux / 25);
	aux -= nr * 25;
	displayChip(gap, canvas.height - card_height - 30 + 2*chip_size,25);
	showMessage(1.2 * gap + chip_size, canvas.height - card_height - 30 + 2.5 * chip_size,"x" + nr);
	
	nr = Math.floor(aux / 5);
	aux -= nr * 5;
	displayChip(gap, canvas.height - card_height - 30 + chip_size,5);
	showMessage(1.2 * gap + chip_size, canvas.height - card_height - 30 + 1.5 * chip_size,"x" + nr);
	
	nr = Math.floor(aux / 1);
	aux -= nr * 1;
	displayChip(gap, canvas.height - card_height - 30,1);
	showMessage(1.2 * gap + chip_size, canvas.height - card_height - 30 + 0.5 * chip_size,"x" + nr);	
}

function showBank()
{
	var bank1 = new Image();
	bank1.src = "Images/Bank.png";
	canvasContext.drawImage(bank1,poz[4] + card_width / 2 + gap/2,canvas.height - card_height - 30,card_width,card_width);
	showMessage1(poz[4] + card_width + gap/2,canvas.height - card_height - 30 + card_width,"$" + myBank);
	
	var bank2 = new Image();
	bank2.src = "Images/Bank.png";
	canvasContext.drawImage(bank2,poz[1] - gap/2 - card_width/2,30,card_width,card_width);
	showMessage1(poz[1] - gap/2,30 + card_width,"$" + computerBank);
}

function drawButtons()
{
	var call = new Image();
	if(m_x >= callx && m_x <= callx + 100 && m_y >= cally && m_y <= cally + chip_size) call.src = "Images/Highlight_Call.png";
	else call.src = "Images/Call.png";
	canvasContext.drawImage(call,poz[5] + card_width,canvas.height - card_height - 30,100,chip_size);
	//showMessage(poz[5] + card_width + 95,canvas.height - card_height - 30 + chip_size/2,": $200");
	
	var raise = new Image();
	if(m_x >= raisex && m_x <= raisex + 100 && m_y >= raisey && m_y <= raisey + chip_size) raise.src = "Images/Highlight_Raise.png";
	else raise.src = "Images/Raise.png";
	canvasContext.drawImage(raise,poz[5] + card_width,canvas.height - card_height - 30 + chip_size,100,chip_size);
	//showMessage(poz[5] + card_width + 95,canvas.height - card_height - 30 + 1.5 * chip_size,": $200");
	
	var fold = new Image();
	if(m_x >= foldx && m_x <= foldx + 100 && m_y >= foldy && m_y <= foldy + chip_size) fold.src = "Images/Highlight_Fold.png";
	else fold.src = "Images/Fold.png";
	canvasContext.drawImage(fold,poz[5] + card_width,canvas.height - card_height - 30 + chip_size * 2,100,chip_size);
	//showMessage(poz[5] + card_width + 95,canvas.height - card_height - 30 + 2.5 * chip_size,": $200");
}

function handleMouseClick(evt) 
{
	if(call_checked == 0 && raise_checked == 0 && fold_checked == 0 && myTurn == 1)
	{
		if(m_x >= callx && m_x <= callx + 100 && m_y >= cally && m_y <= cally + chip_size && IDK != 4)
		{	
			call_checked = 1;
			click ++;
		}
		else if(m_x >= raisex && m_x <= raisex + 100 && m_y >= raisey && m_y <= raisey + chip_size && IDK != 4)
		{	
			raise_checked = 1;
			click ++;
		}
		else if(m_x >= foldx && m_x <= foldx + 100 && m_y >= foldy && m_y <= foldy + chip_size && IDK != 4)
		{
			fold_checked = 1;
			click ++;
		}
	}
}

function DRAW()
{
	if(FlopAnimation == 0 && TurnAnimation == 0 && RiverAnimation == 0) IDK++;
	if(IDK == 1)
	{
		u[1] = 1;
		u[2] = 1;
		u[3] = 1;
		FlopAnimation = 1;
		TurnAnimation = 0;
		RiverAnimation = 0;
	}
	else if(IDK == 2)
	{
		u[4] = 1;
		FlopAnimation = 0;
		TurnAnimation = 1;
		RiverAnimation = 0;
	}
	else if(IDK == 3)
	{
		u[5] = 1;
		FlopAnimation = 0;
		TurnAnimation = 0;
		RiverAnimation = 1;
	}
	else if(IDK == 4)
	{
		var MyBestHand = [], AIBestHand = [], hand = [];
		//MY BEST HAND
		for(var i = 1; i <= 5; i++)
		{
			MyBestHand[i] = card[i];
			hand[i] = card[i];
		}
		for(var i = 1; i <= 5; i++)
		{
			hand[i] = playerCard1;
			if(cmpHand(hand,MyBestHand)==1) copyHand(MyBestHand,hand);
			hand[i] = card[i];
		}
		for(var i = 1; i <= 5; i++)
		{
			hand[i] = playerCard2;
			if(cmpHand(hand,MyBestHand)==1) copyHand(MyBestHand,hand);
			hand[i] = card[i];
		}
		hand[1] = playerCard1;
		hand[2] = playerCard2;
		for(var i = 1; i <= 3; i++)
			for(var j = i+1; j <= 4; j++)
				for(var k = j+1; k <= 5; k++)
				{
					hand[3] = card[i];
					hand[4] = card[j];
					hand[5] = card[k];
					if(cmpHand(hand,MyBestHand)==1) copyHand(MyBestHand,hand);
				}					
		// AI BEST HAND
		for(var i = 1; i <= 5; i++)
		{
			AIBestHand[i] = card[i];
			hand[i] = card[i];
		}
		for(var i = 1; i <= 5; i++)
		{
			hand[i] = computerCard1;
			if(cmpHand(hand,AIBestHand)==1) copyHand(AIBestHand,hand);
			hand[i] = card[i];
		}
		for(var i = 1; i <= 5; i++)
		{
			hand[i] = computerCard2;
			if(cmpHand(hand,AIBestHand)==1) copyHand(AIBestHand,hand);
			hand[i] = card[i];
		}
		hand[1] = computerCard1;
		hand[2] = computerCard2;
		for(var i = 1; i <= 3; i++)
			for(var j = i+1; j <= 4; j++)
				for(var k = j+1; k <= 5; k++)
				{
					hand[3] = card[i];
					hand[4] = card[j];
					hand[5] = card[k];
					if(cmpHand(hand,AIBestHand)==1) copyHand(AIBestHand,hand);
				}	
		copyHand(MyHAND,MyBestHand);
		copyHand(ComputerHAND,AIBestHand);
	}
	else
	{
		IDK = 0;
		init();
	}
}

function displayBestHands()
{
	var H = card_height;
	card_height = 110;
	card_width = card_height / 1.53;
	for(var i = 1; i <= 5; i++)
	{
		displayCard(2*gap + (i-1)*20,canvas.height/2 - H/2 + 0.5 * card_height + 1.5 * gap,MyHAND[i],1);
		displayCard(2*gap + (i-1)*20,canvas.height/2 - H/2 - 0.5 * card_height + gap,ComputerHAND[i],1);
	}
	card_height = 180;
	card_width = card_height / 1.53;
}

function keyPush(evt)
{
	if(evt.keyCode==32)	OK = 1;
}

function copyHand(hand1, hand2)
{
	for(var i = 1; i <= 5; i++)
		hand1[i] = hand2[i];
}

function cmpHand(Hand1, Hand2)
{
	for(i = 1; i <= 5; i++)
	{
		hand1[i] = Hand1[i];
		hand2[i] = Hand2[i];
	}
	if(handValue(hand1) > handValue(hand2)) return 1;
	else if(handValue(hand2) > handValue(hand1)) return -1;
	else
	{
		for(var i = 1; i <= 13; i++)
		{
			val1[i] = 0;
			val2[i] = 0;
		}
		for(i = 1; i <= 5; i++)
		{
			val1[i] = hand1[i] % 13;
			if(val1[i] == 0) val1[i] = 13;
			val2[i] = hand2[i] % 13;
			if(val2[i] == 0) val2[i] = 13;			
		}
		for(var i = 1; i <= 4; i++)
			for(var j = i + 1; j <= 5; j++)
			{
				if(hand1[i] > hand1[j])
				{
					var aux = hand1[i];
					hand1[i] = hand1[j];
					hand1[j] = aux;
				}
				if(hand2[i] > hand2[j])
				{
					var aux = hand2[i];
					hand2[i] = hand2[j];
					hand2[j] = aux;
				}
				if(val1[i] > val1[j])
				{
					var aux = val1[i];
					val1[i] = val1[j];
					val1[j] = aux;
				}
				if(val2[i] > val2[j])
				{
					var aux = val2[i];
					val2[i] = val2[j];
					val2[j] = aux;
				}
			}
		var v = [];
		for(var i = 1; i <= 52; i++)
			v[i] = 0;
		for(var i = 1; i <= 5; i++)
		{
			v[hand1[i]]++;
			v[hand2[i]]++;
		}
		var ok = 1;
		for(var i = 1; i <= 52; i++)
			if(v[i] > 0 && v[i] != 2) ok = 0;
		if(ok == 1) return 1000;
			
		else if(handValue(hand1)==9)
		{
			var mx1 = -1, mx2 = -1, r;
			for(var i = 1; i <= 5; i++)
			{
				r = hand1[i] % 13;
				if(r == 0) r = 13;
				if(mx1 < r) mx1 = r;
				r = hand2[i] % 13;
				if(r == 0) r = 13;
				if(mx2 < r) mx2 = r;
			}
			if(mx1 > mx2) return 1;
			else return -1;
		}
		else if(handValue(hand1)==8)
		{
			var v1 = [], v2 = [], nr1, nr2;
			for(var i = 1; i <= 13; i++)
			{
				v1[i] = 0;
				v2[i] = 0;
			}
			for(var i = 1; i <= 5; i++)
			{
				var r;
				r = hand1[i] % 13;
				if(r == 0) r = 13;
				v1[r] ++;
				r = hand2[i] % 13;
				if(r == 0) r = 13;
				v2[r] ++;
			}
			var c1 = 0, c2 = 0;
			for(var i = 1; i <= 13; i++)
			{
				if(v1[i] == 4) nr1 = i;
				if(v2[i] == 4) nr2 = i;
				if(v1[i] == 1) c1 = i;
				if(v2[i] == 1) c2 = i;				
			}
			if(nr1 == 1 && nr2 != 1) return 1;
			if(nr2 == 1 && nr1 != 1) return -1;
			if(nr1 > nr2) return 1;
			else if(nr1 < nr2) return -1;
			else
			{
				if(c1 > c2) return 1;
				else if(c1 < c2) return -1;
				else return 1000;
			}
		}
		else if(handValue(hand1)==7)
		{
			var v1 = [], v2 = [], nr1, nr2;
			for(var i = 1; i <= 13; i++)
			{
				v1[i] = 0;
				v2[i] = 0;
			}
			for(var i = 1; i <= 5; i++)
			{
				var r;
				r = hand1[i] % 13;
				if(r == 0) r = 13;
				v1[r] ++;
				r = hand2[i] % 13;
				if(r == 0) r = 13;
				v2[r] ++;
			}
			var nr3, nr4;
			for(var i = 1; i <= 13; i++)
			{
				if(v1[i] == 3) nr1 = i;
				if(v2[i] == 3) nr2 = i;
				if(v1[i] == 2) nr3 = i;
				if(v2[i] == 2) nr4 = i;
			}
			if(nr1 == 1 && nr2 != 1) return 1;
			if(nr2 == 1 && nr1 != 1) return -1;
			if(nr1 > nr2) return 1;
			else if(nr1 < nr2) return -1;
			else
			{
				if(nr3 == 1 && nr4 != 1) return 1;
				if(nr4 == 1 && nr3 != 1) return -1;
				if(nr3 > nr4) return 1;
				else if(nr4 > nr3) return -1;
				else return 1000;
			}
		}
		else if(handValue(hand1)==6)
		{
			var mx1 = -1, mx2 = -1, r, ok1 = 0, ok2 = 0;
			for(var i = 1; i <= 5; i++)
			{
				r = hand1[i] % 13;
				if(r == 0) r = 13;
				if(mx1 < r) mx1 = r;
				if(r == 1) ok1 = 1;
				r = hand2[i] % 13;
				if(r == 0) r = 13;
				if(mx2 < r) mx2 = r;
				if(r == 1) ok2 = 1;
			}
			if(ok1 == 1 && ok2 != 1) return 1;
			if(ok2 == 1 && ok1 != 1) return -1;
			if(mx1 > mx2) return 1;
			else if(mx2 > mx1) return -1;
			else
			{
				for(var i = 5; i >= 1; i--)
					if(hand1[i] > hand2[i]) return 1;
					else if(hand2[i] > hand1[i]) return -1;
			}
		}
		else if(handValue(hand1)==5)
		{
			var mx1 = -1, mx2 = -1, r;
			for(var i = 1; i <= 5; i++)
			{
				r = hand1[i] % 13;
				if(r == 0) r = 13;
				if(mx1 < r) mx1 = r;
				r = hand2[i] % 13;
				if(r == 0) r = 13;
				if(mx2 < r) mx2 = r;
			}
			if(mx1 == 13 && mx2 == 13)
			{
				if(val1[1] == 1 && val2[1] != 1) return 1;
				else if(val2[1] == 1 && val1[1] != 1) return -1;
				else return 1000;
			}
			if(mx1 > mx2) return 1;
			else return -1;
		}
		else if(handValue(hand1)==4)
		{
			var v1 = [], v2 = [], nr1, nr2;
			for(var i = 1; i <= 13; i++)
			{
				v1[i] = 0;
				v2[i] = 0;
			}
			for(var i = 1; i <= 5; i++)
			{
				var r;
				r = hand1[i] % 13;
				if(r == 0) r = 13;
				v1[r] ++;
				r = hand2[i] % 13;
				if(r == 0) r = 13;
				v2[r] ++;
			}
			var nr3, nr4;
			for(var i = 1; i <= 13; i++)
			{
				if(v1[i] == 3) nr1 = i;
				if(v2[i] == 3) nr2 = i;
			}
			if(nr1 == 1 && nr2 != 1) return 1;
			if(nr2 == 1 && nr1 != 1) return -1;
			if(nr1 > nr2) return 1;
			else if(nr1 < nr2) return -1;
			else
			{
				if(nr1 == 1 && nr2 == 1)
				{
					for(var i = 5; i >= 1; i--)
						if(val1[i] > val2[i]) return 1;
						else if(val2[i] > val1[i]) return -1;
					return 1000;
				}
				else
				{
					if(val1[1] == 1 && val2[1] != 1) return 1;
					if(val2[1] == 1 && val1[1] != 1) return -1;
					for(var i = 5; i >= 1; i--)
						if(val1[i] > val2[i]) return 1;
						else if(val2[i] > val1[i]) return -1;
					return 1000;
				}
			}
		}
		else if(handValue(hand1)==3)
		{
			var v1 = [], v2 = [], nr1 = 0, nr2 = 0;
			for(var i = 1; i <= 13; i++)
			{
				v1[i] = 0;
				v2[i] = 0;
			}
			for(var i = 1; i <= 5; i++)
			{
				var r;
				r = hand1[i] % 13;
				if(r == 0) r = 13;
				v1[r] ++;
				r = hand2[i] % 13;
				if(r == 0) r = 13;
				v2[r] ++;
			}
			var nr3, nr4;
			for(var i = 13; i >= 1; i--)
			{
				if(v1[i] == 2 && nr1 == 0) nr1 = i;
				if(v2[i] == 2 && nr2 == 0) nr2 = i;
				if(v1[i] == 2 && nr1 != 0) nr3 = i;
				if(v2[i] == 2 && nr2 != 0) nr4 = i;
			}
			if(nr1 == 1 && nr2 != 1) return 1;
			if(nr2 == 1 && nr1 != 1) return -1;
			if(nr1 > nr2) return 1;
			else if(nr1 < nr2) return -1;
			else
			{
				if(nr3 == 1 && nr4 != 1) return 1;
				if(nr4 == 1 && nr3 != 1) return -1;
				if(nr3 > nr4) return 1;
				else if(nr4 > nr3) return -1;
				else 
				{
					if(val1[1] == 1 && val2[1] != 1) return 1;
					if(val2[1] == 1 && val1[1] != 1) return -1;
					for(var i = 5; i >= 1; i--)
						if(val1[i] > val2[i]) return 1;
						else if(val2[i] > val1[i]) return -1;
					return 1000;
				}
			}
		}
		else if(handValue(hand1)==2)
		{
			var v1 = [], v2 = [];
			for(var i = 1; i <= 13; i++)
			{
				v1[i] = 0;
				v2[i] = 0;
			}
			for(var i = 1; i <= 5; i++)
			{
				var r;
				r = hand1[i] % 13;
				if(r == 0) r = 13;
				v1[r] ++;
				r = hand2[i] % 13;
				if(r == 0) r = 13;
				v2[r] ++;
			}
			var nr3, nr4;
			for(var i = 1; i <= 13; i++)
			{
				if(v1[i] == 2) nr1 = i;
				if(v2[i] == 2) nr2 = i;
			}
			if(nr1 == 1 && nr2 != 1) return 1;
			if(nr2 == 1 && nr1 != 1) return -1;
			if(nr1 > nr2) return 1;
			else if(nr1 < nr2) return -1;
			else
			{
				if(nr1 == 1 && nr2 == 1)
				{
					for(var i = 5; i >= 1; i--)
						if(val1[i] > val2[i]) return 1;
						else if(val2[i] > val1[i]) return -1;
					return 1000;
				}
				else
				{
					if(val1[1] == 1 && val2[1] != 1) return 1;
					if(val2[1] == 1 && val1[1] != 1) return -1;
					for(var i = 5; i >= 1; i--)
						if(val1[i] > val2[i]) return 1;
						else if(val2[i] > val1[i]) return -1;
					return 1000;
				}
			}
		}
		else if(handValue(hand1)==1)
		{
			if(val1[1] == 1 && val2[1] != 1) return 1;
			if(val2[1] == 1 && val1[1] != 1) return -1;
			for(var i = 5; i >= 1; i--)
				if(val1[i] > val2[i]) return 1;
				else if(val2[i] > val1[i]) return -1;
			return 1000;
		}
	}
}
function handValue(hand)
{
	var c = [];
	for(var i = 1; i <= 52; i++)
		c[i] = 0;
	for(var i = 1; i <= 5; i++)
		c[hand[i]] = 1;
	
	// ROYAL STRAIGHT FLUSH -> 10
	if(c[1] == 1 && c[10] == 1 && c[11] == 1 && c[12] == 1 && c[13] == 1) return 10;
	else if(c[1+13] == 1 && c[10+13] == 1 && c[11+13] == 1 && c[12+13] == 1 && c[13+13] == 1) return 10;
	else if(c[1+26] == 1 && c[10+26] == 1 && c[11+26] == 1 && c[12+26] == 1 && c[13+26] == 1) return 10;
	else if(c[1+39] == 1 && c[10+39] == 1 && c[11+39] == 1 && c[12+39] == 1 && c[13+39] == 1) return 10;
	
	// STRAIGHT FLUSH -> 9
	var cate1 = 0, cate2 = 0, cate3 = 0, cate4 = 0;
	for(var i = 1; i <= 13; i++)
		if(c[i] == 1) cate1++;
	for(var i = 14; i <= 26; i++)
		if(c[i] == 1) cate2++;
	for(var i = 27; i <= 39; i++)
		if(c[i] == 1) cate3++;
	for(var i = 40; i <= 52; i++)
		if(c[i] == 1) cate4++;	
	if(cate1 == 5 || cate2 == 5 || cate3 == 5 || cate4 == 5) 
	{
		var v = [];
		for(var i = 1; i <= 13; i++)
			v[i] = 0;
		for(var i = 1; i <= 5; i++)
		{
			var r;
			r = hand[i] % 13;
			if(r == 0) r = 13;
			v[r]++;
		}
		for(var i = 1; i <= 13; i++)
			if(v[i] == 1 && v[i+1] == 1 && v[i+2] == 1 && v[i+3] == 1 && v[i+4] == 1) return 9;
		if(v[1] == 1 && v[10] == 1 && v[11] == 1 && v[12] == 1 && v[13] == 1) return 9;
	}
	
	// FOUR OF A KIND -> 8
	var v = [];
	for(var i = 1; i <= 13; i++)
		v[i] = 0;
	for(var i = 1; i <= 5; i++)
	{
		var r;
		r = hand[i] % 13;
		if(r == 0) r = 13;
		v[r]++;
	}
	for(var i = 1; i <= 13; i++)
		if(v[i] == 4) return 8;
	
	// FULL HOUSE -> 7
	var v = [];
	for(var i = 1; i <= 13; i++)
		v[i] = 0;
	for(var i = 1; i <= 5; i++)
	{
		var r;
		r = hand[i] % 13;
		if(r == 0) r = 13;
		v[r]++;
	}
	var nr2 = 0, nr3 = 0;
	for(var i = 1; i <= 13; i++)
	{
		if(v[i] == 2) nr2++;
		if(v[i] == 3) nr3++;
	}
	if(nr2 == 1 && nr3 == 1) return 7;
	
	//FLUSH -> 6
	var cate1 = 0, cate2 = 0, cate3 = 0, cate4 = 0;
	for(var i = 1; i <= 13; i++)
		if(c[i] == 1) cate1++;
	for(var i = 14; i <= 26; i++)
		if(c[i] == 1) cate2++;
	for(var i = 27; i <= 39; i++)
		if(c[i] == 1) cate3++;
	for(var i = 40; i <= 52; i++)
		if(c[i] == 1) cate4++;	
	if(cate1 == 5 || cate2 == 5 || cate3 == 5 || cate4 == 5) return 6;
	
	//STRAIGHT -> 5
	ok = 1;
	var v = [];
	for(var i = 1; i <= 13; i++)
		v[i] = 0;
	for(var i = 1; i <= 5; i++)
	{
		var r;
		r = hand[i] % 13;
		if(r == 0) r = 13;
		v[r]++;
	}
	for(var i = 1; i <= 13; i++)
		if(v[i] == 1 && v[i+1] == 1 && v[i+2] == 1 && v[i+3] == 1 && v[i+4] == 1) return 5;
	if(v[1] == 1 && v[10] == 1 && v[11] == 1 && v[12] == 1 && v[13] == 1) return 5;
	
	//THREE OF A KIND -> 4
	var v = [];
	for(var i = 1; i <= 13; i++)
		v[i] = 0;
	for(var i = 1; i <= 5; i++)
	{
		var r;
		r = hand[i] % 13;
		if(r == 0) r = 13;
		v[r]++;
	}
	var nr3 = 0;
	for(var i = 1; i <= 13; i++)
		if(v[i] == 3) nr3++;
	if(nr3 == 1) return 4;
	
	//TWO PAIR -> 3
	var v = [];
	for(var i = 1; i <= 13; i++)
		v[i] = 0;
	for(var i = 1; i <= 5; i++)
	{
		var r;
		r = hand[i] % 13;
		if(r == 0) r = 13;
		v[r]++;
	}
	var nr2 = 0;
	for(var i = 1; i <= 13; i++)
		if(v[i] == 2) nr2++;
	if(nr2 == 2) return 3;
	
	//ONE PAIR -> 2
	var v = [];
	for(var i = 1; i <= 13; i++)
		v[i] = 0;
	for(var i = 1; i <= 5; i++)
	{
		var r;
		r = hand[i] % 13;
		if(r == 0) r = 13;
		v[r]++;
	}
	var nr2 = 0;
	for(var i = 1; i <= 13; i++)
		if(v[i] == 2) nr2++;
	if(nr2 == 1) return 2;
	
	//HIGH CARD -> 1
	return 1;
}

function displayCard(x_coord, y_coord, card, alpha)
{
	var img = new Image();
	if(card == 1)	img.src = 'Images/Cards/1.png';
	else if(card == 2)	img.src = 'Images/Cards/2.png';
	else if(card == 3)	img.src = 'Images/Cards/3.png';
	else if(card == 4)	img.src = 'Images/Cards/4.png';
	else if(card == 5)	img.src = 'Images/Cards/5.png';
	else if(card == 6)	img.src = 'Images/Cards/6.png';
	else if(card == 7)	img.src = 'Images/Cards/7.png';
	else if(card == 8)	img.src = 'Images/Cards/8.png';
	else if(card == 9)	img.src = 'Images/Cards/9.png';
	else if(card == 10)	img.src = 'Images/Cards/10.png';
	else if(card == 11)	img.src = 'Images/Cards/11.png';
	else if(card == 12)	img.src = 'Images/Cards/12.png';
	else if(card == 13)	img.src = 'Images/Cards/13.png';
	else if(card == 14)	img.src = 'Images/Cards/14.png';
	else if(card == 15)	img.src = 'Images/Cards/15.png';
	else if(card == 16)	img.src = 'Images/Cards/16.png';
	else if(card == 17)	img.src = 'Images/Cards/17.png';
	else if(card == 18)	img.src = 'Images/Cards/18.png';
	else if(card == 19)	img.src = 'Images/Cards/19.png';
	else if(card == 20)	img.src = 'Images/Cards/20.png';
	else if(card == 21)	img.src = 'Images/Cards/21.png';
	else if(card == 22)	img.src = 'Images/Cards/22.png';
	else if(card == 23)	img.src = 'Images/Cards/23.png';
	else if(card == 24)	img.src = 'Images/Cards/24.png';
	else if(card == 25)	img.src = 'Images/Cards/25.png';
	else if(card == 26)	img.src = 'Images/Cards/26.png';
	else if(card == 27)	img.src = 'Images/Cards/27.png';
	else if(card == 28)	img.src = 'Images/Cards/28.png';
	else if(card == 29)	img.src = 'Images/Cards/29.png';
	else if(card == 30)	img.src = 'Images/Cards/30.png';
	else if(card == 31)	img.src = 'Images/Cards/31.png';
	else if(card == 32)	img.src = 'Images/Cards/32.png';
	else if(card == 33)	img.src = 'Images/Cards/33.png';
	else if(card == 34)	img.src = 'Images/Cards/34.png';
	else if(card == 35)	img.src = 'Images/Cards/35.png';
	else if(card == 36)	img.src = 'Images/Cards/36.png';
	else if(card == 37)	img.src = 'Images/Cards/37.png';
	else if(card == 38)	img.src = 'Images/Cards/38.png';
	else if(card == 39)	img.src = 'Images/Cards/39.png';
	else if(card == 40)	img.src = 'Images/Cards/40.png';
	else if(card == 41)	img.src = 'Images/Cards/41.png';
	else if(card == 42)	img.src = 'Images/Cards/42.png';
	else if(card == 43)	img.src = 'Images/Cards/43.png';
	else if(card == 44)	img.src = 'Images/Cards/44.png';
	else if(card == 45)	img.src = 'Images/Cards/45.png';
	else if(card == 46)	img.src = 'Images/Cards/46.png';
	else if(card == 47)	img.src = 'Images/Cards/47.png';
	else if(card == 48)	img.src = 'Images/Cards/48.png';
	else if(card == 49)	img.src = 'Images/Cards/49.png';
	else if(card == 50)	img.src = 'Images/Cards/50.png';
	else if(card == 51)	img.src = 'Images/Cards/51.png';
	else if(card == 52)	img.src = 'Images/Cards/52.png';
	else if(card == 101)	img.src = 'Images/Cards/blue_back.png';
	else if(card == 200)	img.src = 'Images/Cards/no_card.png';
	
	canvasContext.globalAlpha = alpha;
	canvasContext.drawImage(img ,x_coord, y_coord, card_width, card_height);
	canvasContext.globalAlpha = 1;
}

function displayChip(x_coord, y_coord, chip)
{
	var img = new Image();
	if(chip == 1) img.src = 'Images/Chips/$1.png';
	if(chip == 5) img.src = 'Images/Chips/$5.png';
	if(chip == 10) img.src = 'Images/Chips/$10.png';
	if(chip == 25) img.src = 'Images/Chips/$25.png';
	if(chip == 50) img.src = 'Images/Chips/$50.png';
	if(chip == 100) img.src = 'Images/Chips/$100.png';
	if(chip == 500) img.src = 'Images/Chips/$500.png';
	if(chip == 1000) img.src = 'Images/Chips/$1000.png';
	if(chip == 5000) img.src = 'Images/Chips/$5000.png';
	if(chip == 10000) img.src = 'Images/Chips/$10000.png';
	
	canvasContext.drawImage(img, x_coord, y_coord, chip_size, chip_size);
}

function showMessage(x_coord,y_coord,msg)
{	
	canvasContext.moveTo(x_coord,0);
	canvasContext.lineTo(x_coord,canvas.height);
	//canvasContext.stroke();
	canvasContext.textAlign = 'start';
	
	canvasContext.moveTo(0,y_coord);
	canvasContext.lineTo(canvas.width,y_coord);
	//canvasContext.stroke();
	canvasContext.textBaseline = 'middle'; 
	
	canvasContext.fillStyle = 'white';
	canvasContext.font = '30px Segoe UI';
	canvasContext.fillText(msg, x_coord, y_coord);
}

function showMessage1(x_coord,y_coord,msg)
{	
	canvasContext.moveTo(x_coord,0);
	canvasContext.lineTo(x_coord,canvas.height);
	//canvasContext.stroke();
	canvasContext.textAlign = 'center';
	
	canvasContext.moveTo(0,y_coord);
	canvasContext.lineTo(canvas.width,y_coord);
	//canvasContext.stroke();
	canvasContext.textBaseline = 'hanging'; 
	
	canvasContext.fillStyle = 'white';
	canvasContext.font = '40px Segoe UI';
	canvasContext.fillText(msg, x_coord, y_coord);
}

function showMessage2(x_coord,y_coord,msg)
{	
	canvasContext.moveTo(x_coord,0);
	canvasContext.lineTo(x_coord,canvas.height);
	//canvasContext.stroke();
	canvasContext.textAlign = 'center';
	
	canvasContext.moveTo(0,y_coord);
	canvasContext.lineTo(canvas.width,y_coord);
	//canvasContext.stroke();
	canvasContext.textBaseline = 'middle'; 
	
	canvasContext.fillStyle = 'white';
	canvasContext.font = '30px Segoe UI';
	canvasContext.fillText(msg, x_coord, y_coord);
}

function showMyBet(val)
{
	canvasContext.textAlign = 'start';
	canvasContext.textBaseline = 'Bottom';	

	canvasContext.fillStyle = 'white';
	canvasContext.font = '20px Segoe UI';
	canvasContext.fillText("My BET: $" + val, poz[5] + card_width + gap, canvas.height/2 + gap);
}

function showComputerBet(val)
{
	canvasContext.textAlign = 'start';
	canvasContext.textBaseline = 'top';	

	canvasContext.fillStyle = 'white';
	canvasContext.font = '20px Segoe UI';
	canvasContext.fillText("AI BET: $" + val, poz[5] + card_width + gap, canvas.height/2 - 2 * gap);
}

function colorCircle(X,Y,r,drawColor) 
{

	canvasContext.fillStyle = drawColor;
	canvasContext.beginPath();
	canvasContext.arc(X, Y, r, 0,Math.PI*2, true);
	canvasContext.fill();

}

function colorRect(leftX,topY,width,height,drawColor) 
{

	canvasContext.fillStyle = drawColor;
	canvasContext.fillRect(leftX,topY,width,height);
}

function line(x1, y1, x2, y2, drawColor)
{
	canvasContext.strokeStyle = drawColor;
	canvasContext.beginPath();
	canvasContext.moveTo(x1,y1);
	canvasContext.lineTo(x2,y2);
	canvasContext.stroke();
}


function calculateMousePos(evt) 
{
	var rect = canvas.getBoundingClientRect();
	var root = document.documentElement;
	var mouseX = evt.clientX - rect.left - root.scrollLeft;
	var mouseY = evt.clientY - rect.top - root.scrollTop;
	return {
		x:mouseX,
		y:mouseY
	}
}

document.addEventListener("keydown",keyPush);

canvas.addEventListener("mousemove",mouse_move);

function mouse_move(evt) 
{
	var mousePos = calculateMousePos(evt);
	m_x = mousePos.x;
	m_y = mousePos.y;
}

function random_number(MaxNumber)
{
	return Math.floor(Math.random()*(MaxNumber))+1;
}

</script>
</body>
</html>