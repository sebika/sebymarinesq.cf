<html>

<head>

	<title>Hexagon</title>
	<link rel="icon" href="Images/icon.png" type="image/png">

</head>

<body>
<style>body{margin:0;  overflow:hidden;}</style>
<p align = 'center'>
<canvas id ="gameCanvas"></canvas>
</p>

<script>

var canvas;
var canvasContext;
canvas = document.getElementById('gameCanvas');
canvasContext = canvas.getContext('2d');

var colors     = 	["black",  "black", "blue",  "green", 
					"cyan",  "lime", "purple", "red", 
					"yellow", "pink",  "orange", "gray"];
var m_x, m_y;
const fps = 1000;
const R = 36;
const thick = 2.7;
const SIDES = 6;
const glowR = 100;

var vx = [], vy = [], apotema;
var x1 = [], y1 = [], x2 = [], y2 = [], cul = [], intensity = [];
var n = 0, u = 0, nr = 0, idk = 0;

var speedx, speedy, x, y, C;

window.onload = function() 
{
	init();
	window.addEventListener("resize", init, false);
	setInterval(animation, 1000/fps);	
}

function init()
{
	var myWidth = window.innerWidth;
	var myHeight = window.innerHeight;
	canvas.width = myWidth;
	canvas.height = myHeight;
	findPoly(6,canvas.width/2, canvas.height/2);
	apotema = (vy[3] - vy[5]) / 2;
	n = 0;
	u = 0;
	cul[1] = "#ffffff";
	cul[2] = "#e5e5ff";
	cul[3] = "#ccccff";
	cul[4] = "#b2b2ff";
	cul[5] = "#9999ff";
	cul[6] = "#7f7fff";
	cul[7] = "#6666ff";
	cul[8] = "#4c4cff";
	cul[9] = "#3232ff";
	cul[10] = "#1919ff";
	cul[11] = "#0000e5";
	idk = 0;
	speedx  = 10 + random_number(40);
	speedy = 10 + random_number(40);
	x = random_number(canvas.width);
	y = random_number(canvas.height);
	C = 1 + random_number(10);
}

function animation()
{
	drawEverything();
	moveEverything();
}

function drawEverything() 
{
	drawPattern();
	
	idk ++;
	if(idk > 5)
	{
		for(var i = 1; i <= n; i++)
			if(intensity[i] > 1) intensity[i] --;
		idk = 0;
	}
	
	for(var i = 1; i <= n; i++)
	{
		d = Math.sqrt((x1[i]-m_x) * (x1[i]-m_x) + (y1[i]-m_y) * (y1[i]-m_y));
		if(d < glowR) intensity[i] = 11;
		d = Math.sqrt((x2[i]-m_x) * (x2[i]-m_x) + (y2[i]-m_y) * (y2[i]-m_y));
		if(d < glowR) intensity[i] = 11;
		line(x1[i], y1[i], x2[i], y2[i], cul[intensity[i]]);
	}
	
	
	
	/*
	
	idk++;
	if(idk % 25 == 0) C = 1 + random_number(10);
	x += speedx;
	y += speedy;
	if(x < 0 || x > canvas.width) 
	{
		speedx = -speedx;
		if(speedx > -25 && speedx < 25) speedx *= 1.3;
		else speedx *= 0.8;
	}
	if(y < 0 || y > canvas.height) 
	{
		speedy = -speedy;
		if(speedy > -25 && speedy < 25) speedy *= 1.3;
		else speedy *= 0.8;
	}
	
	for(var i = 1; i <= n; i++)
	{
		d = Math.sqrt((x1[i]-x) * (x1[i]-x) + (y1[i]-y) * (y1[i]-y));
		if(d < glowR) intensity[i] = C;
		d = Math.sqrt((x2[i]-x) * (x2[i]-x) + (y2[i]-y) * (y2[i]-y));
		if(d < glowR) intensity[i] = C;
		line(x1[i], y1[i], x2[i], y2[i], colors[intensity[i]]);
	}*/
}

function drawPattern()
{
	for(var y = -apotema/4 ; y <= canvas.height + 2*R; y += (2*apotema))
		for(var x = 0; x <= canvas.width + 2*R; x += (3*R))
		{
			/*var dx, dy;
			if(x < canvas.width - x) dx = x;
			else dx = canvas.width - x;
			if(y < canvas.height - y) dy = y;
			else dy = canvas.height - y;
			if(dx >= R && dy >= R) drawPoly(SIDES, x, y, "black");
			
			if(x + 1.5*R + thick < canvas.width - x - 1.5*R - thick) dx = x + 1.5*R + thick;
			else dx = canvas.width - x - 1.5*R - thick;
			if(y - apotema - thick < canvas.height - y + apotema + thick) dy = y - apotema - thick;
			else dy = canvas.height - y + apotema + thick;
			if(dx >= R && dy >= R) drawPoly(SIDES, x + 1.5*R + thick, y - apotema - thick,"black");*/
			
			drawPoly(SIDES, x, y, "black");
			if(u == 0)
			{
				for(var i = 1; i < SIDES; i++)
				{
					n++;
					x1[n] = vx[i];
					y1[n] = vy[i];
					x2[n] = vx[i+1];
					y2[n] = vy[i+1];
					intensity[n] = 1;
				}
				n++;
				x1[n] = vx[SIDES];
				y1[n] = vy[SIDES];
				x2[n] = vx[1];
				y2[n] = vy[1];
				intensity[n] = 1;
			}
			
			
			drawPoly(SIDES, x + 1.5*R, y - apotema,"black");
			if(u == 0)
			{
				n++;
				x1[n] = vx[2];
				y1[n] = vy[2];
				x2[n] = vx[3];
				y2[n] = vy[3];
				intensity[n] = 1;
				n++;
				x1[n] = vx[5];
				y1[n] = vy[5];
				x2[n] = vx[6];
				y2[n] = vy[6];
				intensity[n] = 1;
			}
		}
	u = 1;
}

function drawPoly(number_of_sides, center_x, center_y, color)
{
	findPoly(number_of_sides, center_x, center_y);
	shape(number_of_sides, vx, vy, color);
}

function findPoly(number_of_sides, center_x, center_y)
{
	var k = 0;
	for(var ang = 0; ang <= 360; ang += 360 / number_of_sides)
	{
		var x, y;
		x = R * Math.cos(ang * Math.PI / 180);
		y = R * Math.sin(ang * Math.PI / 180);
		k ++;
		vx[k] = x + center_x;
		vy[k] = y + center_y;		
	}
}

function shape(number_of_points, x_point, y_point, color)
{
	canvasContext.fillStyle = color;
	canvasContext.beginPath();
	canvasContext.moveTo(x_point[1], y_point[1]);
	for(var i = 2; i <= number_of_points; i++)
		canvasContext.lineTo(x_point[i],y_point[i]);
	canvasContext.closePath();
	canvasContext.fill();
	canvasContext.lineWidth = thick;
	canvasContext.stroke();
}

function map(nr, l1, r1, l2, r2)
{
	var p;
	p = (nr - l1) * 100 / (r1 - l1);
	return l2 + p / 100 * (r2 - l2);
}

function showMessage(x_coord,y_coord,msg)
{	
	canvasContext.moveTo(x_coord,0);
	canvasContext.lineTo(x_coord,canvas.height);
	//canvasContext.stroke();
	canvasContext.textAlign = 'center';
	
	canvasContext.moveTo(0,y_coord);
	canvasContext.lineTo(canvas.width,y_coord);
	//canvasContext.stroke();
	canvasContext.textBaseline = 'middle'; 
	
	canvasContext.fillStyle = 'white';
	canvasContext.font = '50px Segoe UI';
	canvasContext.fillText(msg, x_coord, y_coord);
}

function colorCircle(X,Y,r,drawColor) 
{

	canvasContext.fillStyle = drawColor;
	canvasContext.beginPath();
	canvasContext.arc(X, Y, r, 0,Math.PI*2, true);
	canvasContext.fill();

}

function colorRect(leftX,topY,width,height,drawColor) 
{

	canvasContext.fillStyle = drawColor;
	canvasContext.fillRect(leftX,topY,width,height);
}

function line(x1, y1, x2, y2, drawColor)
{
	canvasContext.strokeStyle = drawColor;
	canvasContext.beginPath();
	canvasContext.moveTo(x1,y1);
	canvasContext.lineTo(x2,y2);
	canvasContext.lineWidth = thick;
	canvasContext.stroke();
}

function keyPush(evt) 
{
	if(evt.keyCode==37)
	{
		alert("left");
	}
}

function calculateMousePos(evt) 
{
	var rect = canvas.getBoundingClientRect();
	var root = document.documentElement;
	var mouseX = evt.clientX - rect.left - root.scrollLeft;
	var mouseY = evt.clientY - rect.top - root.scrollTop;
	return {
		x:mouseX,
		y:mouseY
	}
}

document.addEventListener("keydown",keyPush);

canvas.addEventListener("mousemove",mouse_move);

function mouse_move(evt) 
{
	var mousePos = calculateMousePos(evt);
	m_x = mousePos.x;
	m_y = mousePos.y;
}

function random_number(MaxNumber)
{
	return Math.floor(Math.random()*(MaxNumber))+1;
}

function pow(a, b)
{
	var nr = 1;
	for(var i = 1; i <= b; i++)
		nr = nr * a;
	return nr;
}

</script>
</body>
</html>